<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA DATA 2024-25 å‰100åçƒå“¡æ•¸æ“šå„€è¡¨æ¿</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        h1 {
            text-align: center;
            font-size: 2.8em;
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .subtitle {
            text-align: center;
            color: #666;
            font-size: 1.1em;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }

        .search-container {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 16px;
            transition: all 0.3s;
            background: white;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-size: 18px;
        }

        select {
            padding: 15px 20px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 16px;
            background: white;
            cursor: pointer;
            min-width: 150px;
        }

        button {
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            min-width: 120px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(42, 82, 152, 0.3);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .player-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            position: relative;
            height: 350px;
            cursor: pointer;
            perspective: 1000px;
        }

        .player-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        .player-card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            padding: 25px;
            display: flex;
            flex-direction: column;
        }

        .card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            justify-content: center;
            align-items: center;
        }

        .card-back {
            background: rgba(255, 255, 255, 0.95);
            transform: rotateY(180deg);
            overflow-y: auto;
        }

        .player-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid rgba(255, 255, 255, 0.3);
            margin-bottom: 20px;
            object-fit: cover;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
        }

        .card-front .player-name {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .card-front .player-team {
            font-size: 1.1em;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .card-front .hoopshype-rank {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
        }

        .flip-hint {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8em;
            opacity: 0.7;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .ranking-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            z-index: 10;
        }

        .top-10 {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.5);
        }

        .top-25 {
            background: linear-gradient(45deg, #c0c0c0, #e8e8e8);
            color: #333;
            box-shadow: 0 4px 15px rgba(192, 192, 192, 0.5);
        }

        .top-50 {
            background: linear-gradient(45deg, #cd7f32, #deb887);
            color: white;
            box-shadow: 0 4px 15px rgba(205, 127, 50, 0.5);
        }

        .card-back .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .card-back .player-name {
            font-size: 1.4em;
            font-weight: bold;
            color: #1e3c72;
        }

        .card-back .player-position {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .player-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }

        .info-label {
            color: #666;
            font-size: 0.9em;
        }

        .info-value {
            font-weight: bold;
            color: #333;
        }

        .advanced-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
        }

        .stat-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 5px;
        }

        .stat-name {
            font-size: 0.8em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .placeholder-card {
            opacity: 0.7;
            border: 2px dashed #ccc;
        }

        .placeholder-card .card-front {
            background: #ccc;
        }

        .placeholder-content {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: white;
            font-size: 1.2em;
        }

        .loading-spinner {
            border: 4px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            background: #ff6b6b;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        .no-results {
            text-align: center;
            padding: 50px;
            color: white;
            font-size: 1.2em;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 30px 0;
        }

        .page-btn {
            background: rgba(255, 255, 255, 0.9);
            color: #1e3c72;
            border: 2px solid #1e3c72;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 40px;
            text-align: center;
        }

        .page-btn:hover, .page-btn.active {
            background: #1e3c72;
            color: white;
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .api-status {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-online { background: #28a745; }
        .status-offline { background: #dc3545; }
        .status-testing { background: #ffc107; }

        @media (max-width: 768px) {
            .players-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .search-container {
                max-width: 100%;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .advanced-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>ğŸ€ NBA data 2024-25 å‰100åçƒå“¡</h1>
            <p class="subtitle">
                NBAçƒå“¡å®Œæ•´çµ±è¨ˆæ•¸æ“š
            </p>
            
            <!-- API ç‹€æ…‹é¡¯ç¤º -->
            <div class="api-status" id="apiStatus">
                <span class="status-indicator status-testing" id="statusIndicator"></span>
                <span id="statusText">æ­£åœ¨æª¢æ¸¬ API é€£æ¥...</span>
            </div>
            
            <div class="controls">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="æœå°‹çƒå“¡å§“å...">
                    <span class="search-icon">ğŸ”</span>
                </div>
                
                <select id="teamFilter">
                    <option value="">æ‰€æœ‰çƒéšŠ</option>
                </select>
                
                <select id="rankFilter">
                    <option value="">æ‰€æœ‰æ’å</option>
                    <option value="1-10">å‰10å</option>
                    <option value="11-25">11-25å</option>
                    <option value="26-50">26-50å</option>
                    <option value="51-100">51-100å</option>
                </select>
                
                <select id="dataTypeSelect">
                    <option value="advanced">é€²éšçµ±è¨ˆ</option>
                    <option value="totals">åŸºæœ¬çµ±è¨ˆ</option>
                </select>
                
                <button onclick="loadPlayers()">è¼‰å…¥æ•¸æ“š</button>
                <button onclick="clearFilters()">æ¸…é™¤ç¯©é¸</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="stats-summary" id="statsSummary" style="display: none;">
            <div class="stat-card">
                <div class="stat-number" id="totalPlayers">0</div>
                <div class="stat-label">TOP 100 çƒå“¡</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avgAge">0</div>
                <div class="stat-label">å¹³å‡å¹´é½¡</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalTeams">0</div>
                <div class="stat-label">çƒéšŠæ•¸é‡</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avgPER">0</div>
                <div class="stat-label">å¹³å‡PER</div>
            </div>
        </div>

        <div id="loadingDiv" class="loading" style="display: none;">
            <div class="loading-spinner"></div>
            æ­£åœ¨è¼‰å…¥NBAå‰100åçƒå“¡æ•¸æ“š...
        </div>

        <div id="errorDiv" class="error" style="display: none;"></div>

        <div class="pagination" id="pagination" style="display: none;"></div>

        <div class="players-grid" id="playersContainer"></div>

        <div class="pagination" id="paginationBottom" style="display: none;"></div>
    </div>

    <script>
        // API é…ç½® - æ”¯æ´å¤šå€‹ç«¯é»
        const API_ENDPOINTS = [
            'https://rest.nbaapi.com/api',  // å˜—è©¦ HTTPS ç‰ˆæœ¬
            'http://rest.nbaapi.com/api',   // åŸå§‹ HTTP ç‰ˆæœ¬
            // å¯ä»¥æ·»åŠ å‚™ç”¨ API
        ];
        
        let currentApiEndpoint = null;

        // HoopsHype 2024-25 å‰100åçƒå“¡åå–® (åŒ…å«APIåç¨±æ˜ å°„)
        const top100Players = [
            "Nikola Jokic", "Luka Doncic", "Shai Gilgeous-Alexander", "Giannis Antetokounmpo", "Joel Embiid",
            "Jayson Tatum", "Anthony Edwards", "Jalen Brunson", "Anthony Davis", "Victor Wembanyama",
            "Kevin Durant", "Tyrese Haliburton", "LeBron James", "Stephen Curry", "Tyrese Maxey",
            "Devin Booker", "Donovan Mitchell", "Jaylen Brown", "Ja Morant", "Domantas Sabonis",
            "Damian Lillard", "Zion Williamson", "Paolo Banchero", "De'Aaron Fox", "Pascal Siakam",
            "Kawhi Leonard", "Paul George", "Bam Adebayo", "Trae Young", "Jimmy Butler",
            "Karl-Anthony Towns", "Rudy Gobert", "Kyrie Irving", "Lauri Markkanen", "Scottie Barnes",
            "Jamal Murray", "Cade Cunningham", "Julius Randle", "Alperen Sengun", "Chet Holmgren",
            "LaMelo Ball", "Jaren Jackson Jr", "Jalen Williams", "Kristaps Porzingis", "DeMar DeRozan",
            "Brandon Ingram", "James Harden", "Franz Wagner", "Desmond Bane", "Derrick White",
            "Evan Mobley", "Darius Garland", "Myles Turner", "Jrue Holiday", "Dejounte Murray",
            "Mikal Bridges", "OG Anunoby", "Brandon Miller", "Aaron Gordon", "Jarrett Allen",
            "Kyle Kuzma", "Zach LaVine", "Austin Reaves", "Michael Porter Jr", "Jalen Green",
            "Fred VanVleet", "Miles Bridges", "Jalen Johnson", "Tyler Herro", "Coby White",
            "CJ McCollum", "Josh Giddey", "Bradley Beal", "Trey Murphy", "D'Angelo Russell",
            "Devin Vassell", "Immanuel Quickley", "Herb Jones", "Jaden McDaniels", "Jerami Grant",
            "Josh Hart", "Keegan Murray", "Jonathan Kuminga", "Malik Monk", "Cam Thomas",
            "Donte DiVincenzo", "Anfernee Simons", "Jabari Smith Jr", "Nikola Vucevic", "Tobias Harris",
            "Naz Reid", "Luguentz Dort", "Jalen Suggs", "PJ Washington", "RJ Barrett",
            "Khris Middleton", "Deandre Ayton", "Collin Sexton", "Dereck Lively", "Klay Thompson"
        ];

        // çƒå“¡å§“åAPIæ˜ å°„è¡¨ - è™•ç†ç‰¹æ®Šæƒ…æ³
        const playerNameMappings = {
            "Nikola Jokic": ["Nikola Jokic", "Nikola JokiÄ‡"],
            "Luka Doncic": ["Luka Doncic", "Luka DonÄiÄ‡", "Luka DonÄic"],
            "Kristaps Porzingis": ["Kristaps Porzingis", "Kristaps PorziÅ†Ä£is", "Kristaps Porzinigis"],
            "Herb Jones": ["Herb Jones", "Herbert Jones", "Herbert Keyshawn Jones"],
            "Nikola Vucevic": ["Nikola Vucevic", "Nikola VuÄeviÄ‡", "Nikola Vucevic"],
            "PJ Washington": ["PJ Washington", "P.J. Washington", "Paul Jamaine Washington"],
            "RJ Barrett": ["RJ Barrett", "R.J. Barrett", "Rowan Barrett Jr."],
            "CJ McCollum": ["CJ McCollum", "C.J. McCollum", "Christian James McCollum"],
            "OG Anunoby": ["OG Anunoby", "O.G. Anunoby", "Ogugua Anunoby"],
            "Alperen Sengun": ["Alperen Sengun", "Alperen ÅengÃ¼n"],
            "Jaren Jackson Jr": ["Jaren Jackson Jr", "Jaren Jackson Jr.", "Jaren Walter Jackson Jr."],
            "Karl-Anthony Towns": ["Karl-Anthony Towns", "Karl Anthony Towns"]
        };

        // æ¨¡æ“¬æ•¸æ“šç”Ÿæˆå™¨ï¼ˆä½œç‚ºå‚™ç”¨æ–¹æ¡ˆï¼‰
        function generateMockPlayerData(playerName, rank) {
            const teams = ['LAL', 'GSW', 'BOS', 'MIA', 'CHI', 'NYK', 'LAC', 'PHX', 'DAL', 'MIL', 'DEN', 'PHI'];
            const positions = ['PG', 'SG', 'SF', 'PF', 'C'];
            
            return {
                playerName: playerName,
                team: teams[Math.floor(Math.random() * teams.length)],
                position: positions[Math.floor(Math.random() * positions.length)],
                age: Math.floor(Math.random() * 15) + 20, // 20-35æ­²
                season: 2024,
                hoopsHypeRank: rank,
                originalName: playerName,
                isMockData: true,
                // åŸºæœ¬çµ±è¨ˆï¼ˆæ¨¡æ“¬ï¼‰
                points: Math.floor(Math.random() * 25) + 10,
                assists: Math.floor(Math.random() * 10) + 2,
                totalRb: Math.floor(Math.random() * 12) + 4,
                steals: Math.floor(Math.random() * 3) + 0.5,
                fieldPercent: (Math.random() * 0.3 + 0.4), // 40-70%
                threePercent: (Math.random() * 0.25 + 0.3), // 30-55%
                // é€²éšçµ±è¨ˆï¼ˆæ¨¡æ“¬ï¼‰
                per: Math.random() * 20 + 10, // 10-30
                tsPercent: Math.random() * 0.2 + 0.5, // 50-70%
                usagePercent: Math.random() * 20 + 15, // 15-35%
                winShares: Math.random() * 15 + 2, // 2-17
                vorp: Math.random() * 8 + 1, // 1-9
                box: Math.random() * 10 - 2 // -2åˆ°8
            };
        }

        // æ‰¹é‡è«‹æ±‚é…ç½®
        const BATCH_SIZE = 8; // æ¸›å°‘æ‰¹æ¬¡å¤§å°ä»¥æé«˜ç©©å®šæ€§
        const REQUEST_DELAY = 100; // å¢åŠ å»¶é²æ™‚é–“
        const MAX_CONCURRENT = 3; // æ¸›å°‘ä½µç™¼æ•¸

        let allPlayers = [];
        let filteredPlayers = [];
        let currentPage = 1;
        const playersPerPage = 12;
        let currentDataType = 'advanced';

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        window.onload = function() {
            populateFilters();
            checkApiStatus();
        };

        // æª¢æŸ¥ API ç‹€æ…‹
        async function checkApiStatus() {
            const statusIndicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            
            for (const endpoint of API_ENDPOINTS) {
                try {
                    statusText.textContent = `æ­£åœ¨æ¸¬è©¦ ${endpoint}...`;
                    
                    // æ¸¬è©¦ API é€£æ¥
                    const response = await fetch(`${endpoint}/PlayerDataAdvanced/name/LeBron James`, {
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json',
                        },
                        // è¨­ç½®è¶…æ™‚
                        signal: AbortSignal.timeout(5000)
                    });
                    
                    if (response.ok) {
                        currentApiEndpoint = endpoint;
                        statusIndicator.className = 'status-indicator status-online';
                        statusText.textContent = `âœ… API é€£æ¥æ­£å¸¸ (${endpoint.includes('https') ? 'HTTPS' : 'HTTP'})`;
                        console.log(`âœ… API æ¸¬è©¦æˆåŠŸ: ${endpoint}`);
                        
                        // è‡ªå‹•è¼‰å…¥æ•¸æ“š
                        setTimeout(() => loadPlayers(), 1000);
                        return;
                    }
                } catch (error) {
                    console.warn(`âŒ API æ¸¬è©¦å¤±æ•—: ${endpoint} - ${error.message}`);
                }
            }
            
            // æ‰€æœ‰ API éƒ½å¤±æ•—
            statusIndicator.className = 'status-indicator status-offline';
            statusText.textContent = 'âŒ API ç„¡æ³•é€£æ¥ï¼Œå°‡ä½¿ç”¨æ¨¡æ“¬æ•¸æ“š';
            currentApiEndpoint = null;
            
            // é¡¯ç¤ºæ¨¡æ“¬æ•¸æ“šé¸é …
            setTimeout(() => loadPlayersWithMockData(), 2000);
        }

        // ä½¿ç”¨æ¨¡æ“¬æ•¸æ“šè¼‰å…¥çƒå“¡
        function loadPlayersWithMockData() {
            const loadingDiv = document.getElementById('loadingDiv');
            const errorDiv = document.getElementById('errorDiv');
            
            loadingDiv.style.display = 'block';
            loadingDiv.innerHTML = `
                <div class="loading-spinner"></div>
                ğŸ² æ­£åœ¨ç”Ÿæˆæ¨¡æ“¬ NBA æ•¸æ“š...
                <br><small>ç”±æ–¼ API ç„¡æ³•é€£æ¥ï¼Œå°‡é¡¯ç¤ºæ¼”ç¤ºæ•¸æ“š</small>
            `;
            
            // ç”Ÿæˆæ¨¡æ“¬æ•¸æ“š
            allPlayers = top100Players.map((playerName, index) => 
                generateMockPlayerData(playerName, index + 1)
            );
            
            updateFilterOptions();
            applyFilters();
            updateStatsSummary();
            
            loadingDiv.style.display = 'none';
            document.getElementById('statsSummary').style.display = 'grid';
            
            // é¡¯ç¤ºæ¨¡æ“¬æ•¸æ“šè­¦å‘Š
            errorDiv.style.display = 'block';
            errorDiv.innerHTML = `
                <h3>ğŸ² æ¼”ç¤ºæ¨¡å¼</h3>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 15px 0;">
                    <div style="text-align: center; padding: 15px; background: #d1ecf1; border-radius: 10px;">
                        <div style="font-size: 1.5em; font-weight: bold; color: #0c5460;">ğŸ”§</div>
                        <div style="color: #0c5460;">åŠŸèƒ½å®Œå…¨æ­£å¸¸</div>
                    </div>
                </div>
                <p style="margin: 10px 0; color: #856404;">
                    <strong>åŸå› :</strong> GitHub Pages çš„ HTTPS ç’°å¢ƒç„¡æ³•è¨ªå• HTTP API
                </p>
                <p style="margin: 10px 0; color: #856404;">
                    <strong>è§£æ±ºæ–¹æ¡ˆ:</strong> åœ¨æœ¬åœ°ç’°å¢ƒé‹è¡Œæˆ–ä½¿ç”¨æ”¯æ´ HTTPS çš„ API
                </p>
                <button onclick="this.parentElement.style.display='none'" 
                        style="margin-top: 15px; background: #856404; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                    æˆ‘çŸ¥é“äº†
                </button>
            `;
        }

        // è¼‰å…¥çƒå“¡æ•¸æ“š
        async function loadPlayers() {
            const loadingDiv = document.getElementById('loadingDiv');
            const errorDiv = document.getElementById('errorDiv');
            const playersContainer = document.getElementById('playersContainer');
            const statsSummary = document.getElementById('statsSummary');
            
            loadingDiv.style.display = 'block';
            errorDiv.style.display = 'none';
            playersContainer.innerHTML = '';
            statsSummary.style.display = 'none';
            
            currentDataType = document.getElementById('dataTypeSelect').value;
            const endpoint = currentDataType === 'advanced' ? 'PlayerDataAdvanced' : 'PlayerDataTotals';
            
            // æª¢æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„ API
            if (!currentApiEndpoint) {
                console.log('ğŸ² API ä¸å¯ç”¨ï¼Œä½¿ç”¨æ¨¡æ“¬æ•¸æ“š');
                return loadPlayersWithMockData();
            }
            
            try {
                console.log('ğŸš€ é–‹å§‹è¼‰å…¥çœŸå¯¦ NBA æ•¸æ“š...');
                await loadPlayersIndividually(endpoint);
                
            } catch (error) {
                console.error('è¼‰å…¥çƒå“¡æ•¸æ“šæ™‚å‡ºéŒ¯:', error);
                loadingDiv.style.display = 'none';
                errorDiv.style.display = 'block';
                errorDiv.innerHTML = `
                    <h3>è¼‰å…¥æ•¸æ“šæ™‚ç™¼ç”ŸéŒ¯èª¤</h3>
                    <p>${error.message}</p>
                    <div style="margin: 15px 0;">
                        <p><strong>å¯èƒ½çš„åŸå› ï¼š</strong></p>
                        <ul style="text-align: left; margin-top: 10px;">
                            <li>ğŸ”’ HTTPS/HTTP æ··åˆå…§å®¹éŒ¯èª¤</li>
                            <li>ğŸŒ CORS æ”¿ç­–é™åˆ¶</li>
                            <li>âš¡ API æœå‹™å™¨æš«æ™‚ç„¡æ³•è¨ªå•</li>
                            <li>ğŸ”Œ ç¶²è·¯é€£æ¥å•é¡Œ</li>
                        </ul>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: center; margin-top: 15px;">
                        <button onclick="loadPlayers()" style="background: white; color: #ff6b6b; border: 2px solid white;">
                            ğŸ”„ é‡æ–°è¼‰å…¥
                        </button>
                        <button onclick="loadPlayersWithMockData()" style="background: #ffc107; color: #212529; border: 2px solid #ffc107;">
                            ğŸ² ä½¿ç”¨æ¼”ç¤ºæ•¸æ“š
                        </button>
                    </div>
                `;
            }
        }

        // é«˜é€Ÿæ‰¹é‡è¼‰å…¥çƒå“¡æ•¸æ“š
        async function loadPlayersIndividually(endpoint) {
            const loadingDiv = document.getElementById('loadingDiv');
            
            allPlayers = [];
            let successCount = 0;
            let errorCount = 0;
            
            // åˆ†æ‰¹æ¬¡è™•ç†ï¼Œæ¯æ‰¹ä½µç™¼è«‹æ±‚
            const totalBatches = Math.ceil(top100Players.length / BATCH_SIZE);
            
            for (let batchIndex = 0; batchIndex < totalBatches; batchIndex++) {
                const startIndex = batchIndex * BATCH_SIZE;
                const endIndex = Math.min(startIndex + BATCH_SIZE, top100Players.length);
                const batch = top100Players.slice(startIndex, endIndex);
                
                // æ›´æ–°é€²åº¦
                const progress = ((batchIndex + 1) / totalBatches * 100);
                loadingDiv.innerHTML = `
                    <div class="loading-spinner"></div>
                    ğŸš€ æ­£åœ¨è¼‰å…¥çœŸå¯¦æ•¸æ“š... ${progress.toFixed(0)}%
                    <br>è™•ç†ç¬¬ ${batchIndex + 1}/${totalBatches} æ‰¹ (${batch.length} ä½çƒå“¡)
                    <br><small>âœ… æˆåŠŸ: ${successCount} | âŒ å¤±æ•—: ${errorCount}</small>
                    <br><small>ğŸŒ API: ${currentApiEndpoint}</small>
                `;
                
                // ä½µç™¼è™•ç†ç•¶å‰æ‰¹æ¬¡
                const batchPromises = batch.map(async (playerName, batchPlayerIndex) => {
                    const playerIndex = startIndex + batchPlayerIndex;
                    return await loadSinglePlayer(playerName, playerIndex, endpoint);
                });
                
                // ç­‰å¾…ç•¶å‰æ‰¹æ¬¡å®Œæˆ
                const batchResults = await Promise.allSettled(batchPromises);
                
                // çµ±è¨ˆçµæœ
                batchResults.forEach((result, batchPlayerIndex) => {
                    const playerIndex = startIndex + batchPlayerIndex;
                    if (result.status === 'fulfilled' && result.value) {
                        allPlayers.push(result.value);
                        successCount++;
                    } else {
                        // å‰µå»ºä½”ä½ç¬¦æˆ–ä½¿ç”¨æ¨¡æ“¬æ•¸æ“š
                        const mockData = generateMockPlayerData(top100Players[playerIndex], playerIndex + 1);
                        mockData.isPlaceholder = true;
                        allPlayers.push(mockData);
                        errorCount++;
                    }
                });
                
                // å¯¦æ™‚æ›´æ–°é¡¯ç¤º
                if (batchIndex % 2 === 0 || batchIndex === totalBatches - 1) {
                    allPlayers.sort((a, b) => a.hoopsHypeRank - b.hoopsHypeRank);
                    updateFilterOptions();
                    applyFilters();
                    updateStatsSummary();
                    document.getElementById('statsSummary').style.display = 'grid';
                }
                
                // å°å»¶é²é¿å…APIé™åˆ¶
                if (batchIndex < totalBatches - 1) {
                    await new Promise(resolve => setTimeout(resolve, REQUEST_DELAY));
                }
            }
            
            console.log(`ğŸ¯ è¼‰å…¥å®Œæˆ: æˆåŠŸ ${successCount}/100 ä½çƒå“¡ (${(successCount/100*100).toFixed(1)}%)`);
            
            // æœ€çµ‚æ•´ç†å’Œé¡¯ç¤º
            allPlayers.sort((a, b) => a.hoopsHypeRank - b.hoopsHypeRank);
            updateFilterOptions();
            applyFilters();
            updateStatsSummary();
            
            loadingDiv.style.display = 'none';
            document.getElementById('statsSummary').style.display = 'grid';
            
            // é¡¯ç¤ºçµæœçµ±è¨ˆ
            if (errorCount > 0 || successCount < 100) {
                const errorDiv = document.getElementById('errorDiv');
                errorDiv.style.display = 'block';
                errorDiv.innerHTML = `
                    <h3>ğŸ¯ è¼‰å…¥å®Œæˆï¼</h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
                        <div style="text-align: center; padding: 10px; background: #d4edda; border-radius: 10px;">
                            <div style="font-size: 2em; font-weight: bold; color: #155724;">${successCount}</div>
                            <div style="color: #155724;">çœŸå¯¦æ•¸æ“š</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: #fff3cd; border-radius: 10px;">
                            <div style="font-size: 2em; font-weight: bold; color: #856404;">${errorCount}</div>
                            <div style="color: #856404;">æ¨¡æ“¬æ•¸æ“š</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: #d1ecf1; border-radius: 10px;">
                            <div style="font-size: 2em; font-weight: bold; color: #0c5460;">${(successCount/100*100).toFixed(1)}%</div>
                            <div style="color: #0c5460;">æˆåŠŸç‡</div>
                        </div>
                    </div>
                    <small>âš¡ ${successCount > 0 ? 'éƒ¨åˆ†ä½¿ç”¨çœŸå¯¦ NBA API æ•¸æ“š' : 'å®Œå…¨ä½¿ç”¨æ¼”ç¤ºæ•¸æ“š'}</small>
                `;
            }
        }

        // è¼‰å…¥å–®å€‹çƒå“¡æ•¸æ“š
        async function loadSinglePlayer(playerName, playerIndex, endpoint) {
            try {
                const nameVariants = playerNameMappings[playerName] || [playerName];
                
                for (const variant of nameVariants) {
                    const encodedName = encodeURIComponent(variant);
                    const url = `${currentApiEndpoint}/${endpoint}/name/${encodedName}`;
                    
                    const response = await fetch(url, {
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json',
                        },
                        // è¨­ç½®è¶…æ™‚
                        signal: AbortSignal.timeout(8000)
                    });
                    
                    if (response.ok) {
                        const playerData = await response.json();
                        if (Array.isArray(playerData) && playerData.length > 0) {
                            const latestData = playerData.sort((a, b) => b.season - a.season)[0];
                            latestData.hoopsHypeRank = playerIndex + 1;
                            latestData.originalName = playerName;
                            latestData.apiName = variant;
                            
                            console.log(`âœ… ${playerIndex + 1}/100: ${playerName}`);
                            return latestData;
                        }
                    }
                }
                
                console.warn(`âŒ ${playerIndex + 1}/100: ${playerName} - æœªæ‰¾åˆ°æ•¸æ“š`);
                return null;
            } catch (error) {
                console.error(`ğŸ’¥ ${playerIndex + 1}/100: ${playerName} - éŒ¯èª¤: ${error.message}`);
                return null;
            }
        }

        // æ›´æ–°ç¯©é¸å™¨é¸é …
        function updateFilterOptions() {
            const teamFilter = document.getElementById('teamFilter');
            
            // ç²å–å”¯ä¸€çš„çƒéšŠ
            const teams = [...new Set(allPlayers.map(p => p.team))].sort();
            teamFilter.innerHTML = '<option value="">æ‰€æœ‰çƒéšŠ</option>' + 
                teams.map(team => `<option value="${team}">${team}</option>`).join('');
        }

        // é è¨­å¡«å……ç¯©é¸å™¨
        function populateFilters() {
            const teamFilter = document.getElementById('teamFilter');
            
            // å¸¸è¦‹NBAçƒéšŠ
            const commonTeams = ['LAL', 'GSW', 'BOS', 'MIA', 'CHI', 'NYK', 'LAC', 'PHX', 'DAL', 'MIL', 'DEN', 'PHI'];
            teamFilter.innerHTML = '<option value="">æ‰€æœ‰çƒéšŠ</option>' + 
                commonTeams.map(team => `<option value="${team}">${team}</option>`).join('');
        }

        // æ‡‰ç”¨ç¯©é¸
        function applyFilters() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const teamFilter = document.getElementById('teamFilter').value;
            const rankFilter = document.getElementById('rankFilter').value;
            
            filteredPlayers = allPlayers.filter(player => {
                const matchesSearch = !searchTerm || 
                    player.playerName.toLowerCase().includes(searchTerm);
                const matchesTeam = !teamFilter || player.team === teamFilter;
                
                let matchesRank = true;
                if (rankFilter) {
                    const [min, max] = rankFilter.split('-').map(Number);
                    matchesRank = player.hoopsHypeRank >= min && player.hoopsHypeRank <= max;
                }
                
                return matchesSearch && matchesTeam && matchesRank;
            });
            
            currentPage = 1;
            displayPlayers();
        }

        // é¡¯ç¤ºçƒå“¡
        function displayPlayers() {
            const playersContainer = document.getElementById('playersContainer');
            const startIndex = (currentPage - 1) * playersPerPage;
            const endIndex = startIndex + playersPerPage;
            const playersToShow = filteredPlayers.slice(startIndex, endIndex);
            
            if (playersToShow.length === 0) {
                playersContainer.innerHTML = '<div class="no-results">æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„çƒå“¡</div>';
                document.getElementById('pagination').style.display = 'none';
                document.getElementById('paginationBottom').style.display = 'none';
                return;
            }
            
            playersContainer.innerHTML = playersToShow.map(player => createPlayerCard(player)).join('');
            updatePagination();
        }

        // å‰µå»ºçƒå“¡å¡ç‰‡
        function createPlayerCard(player) {
            const isAdvanced = currentDataType === 'advanced';
            const rank = player.hoopsHypeRank;
            
            let rankClass = '';
            if (rank <= 10) rankClass = 'top-10';
            else if (rank <= 25) rankClass = 'top-25';
            else if (rank <= 50) rankClass = 'top-50';
            
            // æ•¸æ“šä¾†æºæ¨™è­˜
            const dataSource = player.isMockData || player.isPlaceholder ? 'ğŸ²' : 'âœ…';
            const dataTooltip = player.isMockData || player.isPlaceholder ? 'æ¼”ç¤ºæ•¸æ“š' : 'çœŸå¯¦æ•¸æ“š';
            
            return `
                <div class="player-card" onclick="flipCard(this)" title="${dataTooltip}">
                    <div class="ranking-badge ${rankClass}">#${rank}</div>
                    <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 4px 8px; border-radius: 10px; font-size: 0.8em;" title="${dataTooltip}">
                        ${dataSource}
                    </div>
                    <div class="card-inner">
                        <!-- æ­£é¢ -->
                        <div class="card-front">
                            <div class="player-photo">
                                <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 3em; background: rgba(255,255,255,0.1); border-radius: 50%;">ğŸ€</div>
                            </div>
                            <div class="player-name">${player.playerName}</div>
                            <div class="player-team">${player.team}</div>
                            <div class="hoopshype-rank">RANK #${rank}</div>
                            <div class="flip-hint">é»æ“ŠæŸ¥çœ‹æ•¸æ“š â†»</div>
                        </div>
                        
                        <!-- èƒŒé¢ -->
                        <div class="card-back">
                            <div class="player-header">
                                <div class="player-name">${player.playerName}</div>
                                <div class="player-position">${player.position || 'N/A'}</div>
                            </div>
                            
                            <div class="player-info">
                                <div class="info-item">
                                    <span class="info-label">çƒéšŠ:</span>
                                    <span class="info-value">${player.team}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">NBAæ’å:</span>
                                    <span class="info-value">#${rank}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">è³½å­£:</span>
                                    <span class="info-value">${player.season}-${(player.season + 1).toString().slice(-2)}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">å¹´é½¡:</span>
                                    <span class="info-value">${player.age || 'N/A'}</span>
                                </div>
                            </div>
                            
                            <div class="advanced-stats">
                                ${isAdvanced ? `
                                    <div class="stat-item">
                                        <div class="stat-value">${(player.per || 0).toFixed(1)}</div>
                                        <div class="stat-name">PER</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${((player.tsPercent || 0) * 100).toFixed(1)}%</div>
                                        <div class="stat-name">TS%</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${(player.usagePercent || 0).toFixed(1)}%</div>
                                        <div class="stat-name">USG%</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${(player.winShares || 0).toFixed(1)}</div>
                                        <div class="stat-name">WS</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${(player.vorp || 0).toFixed(1)}</div>
                                        <div class="stat-name">VORP</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${(player.box || 0).toFixed(1)}</div>
                                        <div class="stat-name">BPM</div>
                                    </div>
                                ` : `
                                    <div class="stat-item">
                                        <div class="stat-value">${player.points || 0}</div>
                                        <div class="stat-name">å¾—åˆ†</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${player.assists || 0}</div>
                                        <div class="stat-name">åŠ©æ”»</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${player.totalRb || player.rebounds || 0}</div>
                                        <div class="stat-name">ç±ƒæ¿</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${((player.fieldPercent || 0) * 100).toFixed(1)}%</div>
                                        <div class="stat-name">æŠ•ç±ƒ%</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${((player.threePercent || 0) * 100).toFixed(1)}%</div>
                                        <div class="stat-name">ä¸‰åˆ†%</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">${player.steals || 0}</div>
                                        <div class="stat-name">æŠ„æˆª</div>
                                    </div>
                                `}
                            </div>
                            
                            ${player.isMockData || player.isPlaceholder ? `
                                <div style="margin-top: 15px; padding: 10px; background: #fff3cd; border-radius: 8px; font-size: 0.8em; color: #856404;">
                                    ğŸ² æ¼”ç¤ºæ•¸æ“š - åƒ…ä¾›å±•ç¤º
                                </div>
                            ` : ''}
                            
                            <div class="flip-hint" style="margin-top: 15px;">é»æ“Šè¿”å›ç…§ç‰‡ â†»</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // å¡ç‰‡ç¿»è½‰åŠŸèƒ½
        function flipCard(cardElement) {
            cardElement.classList.toggle('flipped');
        }

        // æ›´æ–°çµ±è¨ˆæ‘˜è¦
        function updateStatsSummary() {
            if (filteredPlayers.length === 0) return;
            
            const totalPlayers = filteredPlayers.length;
            const avgAge = (filteredPlayers.reduce((sum, p) => sum + (p.age || 0), 0) / totalPlayers).toFixed(1);
            const totalTeams = new Set(filteredPlayers.map(p => p.team)).size;
            
            let avgPER = 0;
            if (currentDataType === 'advanced') {
                avgPER = (filteredPlayers.reduce((sum, p) => sum + (p.per || 0), 0) / totalPlayers).toFixed(1);
            } else {
                avgPER = (filteredPlayers.reduce((sum, p) => sum + (p.points || 0), 0) / totalPlayers).toFixed(1);
            }
            
            document.getElementById('totalPlayers').textContent = totalPlayers;
            document.getElementById('avgAge').textContent = avgAge;
            document.getElementById('totalTeams').textContent = totalTeams;
            document.getElementById('avgPER').textContent = avgPER;
            
            // æ›´æ–°æ¨™ç±¤
            const perLabel = document.querySelector('#statsSummary .stat-card:last-child .stat-label');
            perLabel.textContent = currentDataType === 'advanced' ? 'å¹³å‡PER' : 'å¹³å‡å¾—åˆ†';
        }

        // æ›´æ–°åˆ†é 
        function updatePagination() {
            const totalPages = Math.ceil(filteredPlayers.length / playersPerPage);
            const pagination = document.getElementById('pagination');
            const paginationBottom = document.getElementById('paginationBottom');
            
            if (totalPages <= 1) {
                pagination.style.display = 'none';
                paginationBottom.style.display = 'none';
                return;
            }
            
            const paginationHTML = createPaginationHTML(totalPages);
            pagination.innerHTML = paginationHTML;
            paginationBottom.innerHTML = paginationHTML;
            pagination.style.display = 'flex';
            paginationBottom.style.display = 'flex';
        }

        function createPaginationHTML(totalPages) {
            let html = `<button class="page-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>â€¹</button>`;
            
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
                    html += `<button class="page-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
                } else if (i === currentPage - 3 || i === currentPage + 3) {
                    html += `<span class="page-btn">...</span>`;
                }
            }
            
            html += `<button class="page-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>â€º</button>`;
            return html;
        }

        function changePage(page) {
            const totalPages = Math.ceil(filteredPlayers.length / playersPerPage);
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                displayPlayers();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // æ¸…é™¤ç¯©é¸
        function clearFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('teamFilter').value = '';
            document.getElementById('rankFilter').value = '';
            applyFilters();
        }

        // äº‹ä»¶ç›£è½å™¨
        document.getElementById('searchInput').addEventListener('input', applyFilters);
        document.getElementById('teamFilter').addEventListener('change', applyFilters);
        document.getElementById('rankFilter').addEventListener('change', applyFilters);
        document.getElementById('dataTypeSelect').addEventListener('change', loadPlayers);
    </script>
</body>
</html>="text-align: center; padding: 15px; background: #fff3cd; border-radius: 10px;">
                        <div style="font-size: 1.5em; font-weight: bold; color: #856404;">âš ï¸</div>
                        <div style="color: #856404;">æ­£åœ¨é¡¯ç¤ºæ¨¡æ“¬æ•¸æ“š</div>
                    </div>
                    <div style
